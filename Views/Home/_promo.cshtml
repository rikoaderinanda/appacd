<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBS9s8GewgkGEaj3ANIwMaTOmZCYbd-aR0&callback=initMap"></script>
<div class="col-12 mb-3">
    <div class="mt-10">
        <p class="mt-3">
            <span id="SalamWaktu"></span>
            <span id="Username"></span>
        </p>
        @* <div class="d-flex align-items-start p-3 rounded-3 shadow-sm bg-light" style="border-left: 4px solid #0d6efd;display:none;">
            <i class="bi bi-geo-alt-fill text-primary fs-4 me-2"></i>
            <div>
                <small class="text-muted d-block">Lokasi Saat Ini</small>
                <span id="AlamatSekarang" class="fw-semibold">
                </span>
            </div>
        </div> *@
        <a href="#"
        class="d-flex align-items-center text-decoration-none px-2 py-1 rounded-pill bg-light">
            <i class="bi bi-geo-alt-fill text-primary me-1"></i>
            <span id="currentLocation" class="fw-semibold small text-dark">
                Memuat lokasi...
            </span>
        </a>
        <div class="items-group mt-3">
            <div class="owl-carousel offer-slider owl-theme">
                <div class="item">
                    <a href="#" class="offer-banner-item">
                        <img class="w-100 img-fluid" style="border-radius:10px 10px;" src="https://res.cloudinary.com/dfdjjuhr0/image/upload/v1754554092/Gemini_Generated_Image_1mncsj1mncsj1mnc_ssl77t.png" alt="">
                    </a>
                </div>
                <div class="item">
                    <a href="#" class="offer-banner-item">
                        <img class="w-100 img-fluid" style="border-radius:10px 10px;" src="https://res.cloudinary.com/dfdjjuhr0/image/upload/v1754554219/Gemini_Generated_Image_anbpw1anbpw1anbp_gdbbx5.png" alt="">
                    </a>
                </div>
                <div class="item">
                    <a href="#" class="offer-banner-item">
                        <img class="w-100 img-fluid" style="border-radius:10px 10px;" src="https://res.cloudinary.com/dfdjjuhr0/image/upload/v1754554474/Gemini_Generated_Image_qookx2qookx2qook_erqgqm.png" alt="">
                    </a>
                </div>
                <div class="item">
                    <a href="#" class="offer-banner-item">
                        <img class="w-100 img-fluid" style="border-radius:10px 10px;" src="https://res.cloudinary.com/dfdjjuhr0/image/upload/v1754554513/Gemini_Generated_Image_bfrk06bfrk06bfrk_aub6mn.png" alt="">
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var $;
    document.addEventListener('DOMContentLoaded', function () {
        if (typeof window.jQuery === 'undefined') {
            console.error('jQuery is not loaded.');
            return;
        }
        $ = window.jQuery;
        
        $('.offer-slider').owlCarousel({
            loop: true,
            margin: 2,
            nav: false,
            dots: false,
            autoplay: true,
            autoplayTimeout: 3000,
            autoplayHoverPause: true,
            responsive: {
                0: { items: 2.3 },
                600: { items: 2 },
                1000: { items: 3 }
            }
        });

    });
    function initMap() {
        navigator.geolocation.getCurrentPosition(
            success_getLocation,
            error_getLocation
        );
        // inisialisasi peta
    }

    async function success_getLocation(pos) {
    const lat = pos.coords.latitude;
    const lng = pos.coords.longitude;
    console.log('Lat:', lat, 'Lng:', lng);

    // setelah dapat lat/lng, panggil Google Geocoding API
    const data = await getAddress_api(lat, lng);
        //console.log(data);
        if (data != null) {
            $('#currentLocation').text(
                `${data.kelurahan}, ${data.kecamatan}, ${data.city}`
            );
            //$('#AlamatSekarang').text(`${data.fullAddress}`);
        }
    }
</script>